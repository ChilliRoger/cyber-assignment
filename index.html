<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SHA-256 vs MD5 Collision & Performance Demo</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; line-height: 1.6; }
header { background: #2c3e50; color: #fff; padding: 30px 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
header h1 { font-size: 28px; font-weight: 600; letter-spacing: 0.5px; }
section { padding: 40px 20px; max-width: 1000px; margin: auto; }
h2 { margin: 50px 0 20px 0; font-size: 24px; color: #2c3e50; font-weight: 600; padding-bottom: 10px; border-bottom: 3px solid #3498db; }
h3 { color: #34495e; font-size: 18px; margin: 15px 0; }
p { margin: 15px 0; font-size: 15px; color: #555; }
.content-card { background: #fff; padding: 25px; margin: 20px 0; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #3498db; }
.code-box { background: #2c3e50; color: #2ecc71; padding: 15px; font-family: 'Courier New', monospace; border-radius: 4px; overflow-x: auto; font-size: 14px; }
input { 
  width: 100%; 
  padding: 12px 15px; 
  margin: 10px 0; 
  font-size: 15px; 
  border: 2px solid #ddd; 
  border-radius: 4px; 
  transition: border-color 0.3s; 
  font-family: inherit;
}
input:focus { outline: none; border-color: #3498db; }
#inputFields { margin: 20px 0; }
#inputFields input { margin: 8px 0; }
button { 
  padding: 12px 30px; 
  margin: 10px 5px 10px 0; 
  font-size: 15px; 
  font-weight: 600; 
  cursor: pointer; 
  background: #3498db; 
  color: #fff; 
  border: none; 
  border-radius: 4px; 
  transition: all 0.3s;
  box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3);
}
button:hover { background: #2980b9; box-shadow: 0 4px 8px rgba(52, 152, 219, 0.4); transform: translateY(-1px); }
button:active { transform: translateY(0); }
button:disabled { background: #95a5a6; cursor: not-allowed; box-shadow: none; }
.output { 
  margin: 15px 0; 
  padding: 15px 20px; 
  background: #ecf0f1; 
  border-radius: 4px; 
  word-break: break-all; 
  border-left: 4px solid #95a5a6;
  font-family: 'Courier New', monospace;
  font-size: 13px;
}
.table-box { margin: 25px 0; overflow-x: auto; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-radius: 4px; }
table { border-collapse: collapse; width: 100%; background: #fff; }
th { background: #34495e; color: #fff; padding: 15px; text-align: center; font-weight: 600; font-size: 15px; }
td { padding: 12px 15px; border: 1px solid #e0e0e0; text-align: center; font-size: 14px; }
tr:nth-child(even) { background: #f9f9f9; }
tr:hover { background: #f0f0f0; }
footer { text-align: center; padding: 30px 20px; margin-top: 50px; background: #2c3e50; color: #fff; font-size: 14px; }
.report-section { background: #fff; padding: 30px; margin: 30px 0; border-radius: 6px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); display: none; border-top: 4px solid #3498db; }
.report-section.show { display: block; animation: slideIn 0.4s ease-out; }
@keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.report-title { font-size: 22px; color: #2c3e50; font-weight: 600; margin-bottom: 25px; text-align: center; padding-bottom: 15px; border-bottom: 2px solid #ecf0f1; }
.comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 25px 0; }
@media (max-width: 768px) { .comparison-grid { grid-template-columns: 1fr; } }
.compare-box { padding: 20px; border-radius: 6px; border: 2px solid #ddd; background: #fafafa; transition: all 0.3s; }
.compare-box:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.compare-box.winner { border-color: #27ae60; background: #f0fdf4; }
.compare-box.loser { border-color: #e74c3c; background: #fef2f2; }
.compare-title { font-weight: 600; font-size: 18px; margin-bottom: 15px; text-align: center; padding-bottom: 10px; border-bottom: 2px solid #ecf0f1; }
.compare-title.winner { color: #27ae60; }
.compare-title.loser { color: #e74c3c; }
.compare-box p { margin: 10px 0; font-size: 14px; color: #555; }
.compare-box strong { color: #2c3e50; }
.verdict { background: #ecf0f1; padding: 20px; border-radius: 6px; margin-top: 20px; text-align: center; font-weight: 500; color: #2c3e50; border-left: 4px solid #3498db; font-size: 15px; line-height: 1.8; }
.chart-container { background: #fff; padding: 30px; margin: 25px 0; border-radius: 6px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); display: none; border-top: 4px solid #3498db; }
.chart-container.show { display: block; animation: slideIn 0.4s ease-out; }
.chart-container h3 { text-align: center; color: #2c3e50; margin-bottom: 20px; font-size: 20px; font-weight: 600; }
canvas { max-width: 100%; height: auto !important; }
</style>
</head>
<body>
<header><h1>SHA-256 vs MD5 Collision Handling & Performance Simulation</h1></header>
<section>
<h2>1. What is a Collision Attack?</h2>
<p>A collision occurs when two different inputs produce the same hash output. A cryptographically secure hash must make finding collisions computationally infeasible.</p>
<p><strong>MD5</strong> has known real-world collisions. <strong>SHA-256</strong> currently has no practical collision attacks.</p>

<h2>2. SHA-256 vs MD5: Hash Generator</h2>
<div class="content-card">
<p>Type text below and compare how MD5 and SHA-256 generate different hashes.</p>
<input type="text" id="hashInput" placeholder="Enter text here..." />
<button onclick="generateHashes()">Generate Hashes</button>
<div class="output" id="md5out">MD5: </div>
<div class="output" id="shaout">SHA-256: </div>
</div>

<h2>3. Performance Test (Client-Side)</h2>
<div class="content-card">
<p>Enter 5 different text inputs to see how hash generation time varies for each algorithm. The test will run 10 iterations per input for accurate results.</p>
<div id="inputFields">
<input type="text" id="testInput1" placeholder="Input 1: Enter text..." />
<input type="text" id="testInput2" placeholder="Input 2: Enter text..." />
<input type="text" id="testInput3" placeholder="Input 3: Enter text..." />
<input type="text" id="testInput4" placeholder="Input 4: Enter text..." />
<input type="text" id="testInput5" placeholder="Input 5: Enter text..." />
</div>
<button id="runTestBtn" onclick="runPerformanceTest()">Run Speed Test</button>
<div id="loadingIndicator" style="display: none; margin-top: 15px; color: #3498db; font-weight: 500;">
  <span>Running performance test...</span>
  <div style="margin-top: 10px; background: #ecf0f1; height: 4px; border-radius: 2px; overflow: hidden;">
    <div id="progressBar" style="background: #3498db; height: 100%; width: 0%; transition: width 0.3s;"></div>
  </div>
</div>
</div>
<div class="table-box" id="resultsTable" style="display: none;">
<table id="perfTable">
<tr>
<th>Input</th>
<th>MD5 Time (ms)</th>
<th>SHA-256 Time (ms)</th>
</tr>
</table>
</div>

<div class="chart-container" id="chartContainer">
<h3>Performance Comparison - Line Graph</h3>
<canvas id="perfChart"></canvas>
<div id="graphExplanation" style="margin-top: 25px; padding: 20px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #3498db;">
  <h4 style="color: #2c3e50; margin-bottom: 15px; font-size: 16px;">How the Graph is Plotted:</h4>
  <div id="explanationContent" style="font-size: 14px; color: #555; line-height: 1.8;"></div>
</div>
</div>

<div class="report-section" id="justificationReport">
<div class="report-title">Justification Report: Why SHA-256 is Better</div>

<div class="comparison-grid">
<div class="compare-box loser">
<div class="compare-title loser">MD5 (Deprecated)</div>
<p><strong>Hash Length:</strong> 128 bits</p>
<p><strong>Security:</strong> BROKEN (collisions found in 2004)</p>
<p><strong>Status:</strong> Deprecated by NIST</p>
<p><strong>Real Attacks:</strong> Multiple (e.g., Flame malware 2012)</p>
<p><strong>Performance:</strong> Faster</p>
<p><strong>Modern Use:</strong> Legacy checksums only</p>
</div>

<div class="compare-box winner">
<div class="compare-title winner">SHA-256 (Recommended)</div>
<p><strong>Hash Length:</strong> 256 bits</p>
<p><strong>Security:</strong> No known collisions</p>
<p><strong>Status:</strong> NIST approved (FIPS 180-4)</p>
<p><strong>Real Attacks:</strong> None</p>
<p><strong>Performance:</strong> Slightly slower (~30%)</p>
<p><strong>Modern Use:</strong> Bitcoin, SSL/TLS, Code signing</p>
</div>
</div>

<div class="verdict">
<strong>VERDICT:</strong> SHA-256 is the clear winner. While MD5 is slightly faster, it's cryptographically broken and unsuitable for any security application. The minimal performance cost of SHA-256 is a worthwhile trade-off for robust, proven security.
</div>
</div>

<h2>4. Conclusion</h2>
<p>MD5 is faster but insecure due to proven collisions. SHA-256 is slightly slower but secure against collision attacks.</p>

</section>
<footer>Cyber Security Assignment Demo Website</footer>

<script>
// Minimal MD5 JS implementation (from webtoolkits, simplified)
function md5cycle(x, k) {
  /* Implementation omitted for brevity in this snippet */
}
// Instead, using built-in TextEncoder + crypto.subtle for SHA-256

async function sha256(str) {
  const encoder = new TextEncoder();
  const data = encoder.encode(str);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

// Lightweight MD5 implementation (from blueimp-md5)
function md5(string) {
  function rhex(n){var s="",j=0;for(;j<4;j++)s+=("0"+((n>>>(j*8))&255).toString(16)).slice(-2);return s;}
  function add(x,y){return(((x&65535)+(y&65535))<<16>>>0)+((x>>>16)+(y>>>16))<<16>>>0;}
  function cmn(q,a,b,x,s,t){a=add(add(a,q),add(x,t));return add((a<<s)+(a>>>(32-s)),b);}
  function ff(a,b,c,d,x,s,t){return cmn((b&c)|((~b)&d),a,b,x,s,t);} 
  function gg(a,b,c,d,x,s,t){return cmn((b&d)|(c&(~d)),a,b,x,s,t);} 
  function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t);} 
  function ii(a,b,c,d,x,s,t){return cmn(c^(b|(~d)),a,b,x,s,t);} 
  function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];
   a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);
   c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);
   a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);
   c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);
   a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);
   c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);
   a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);
   c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);
   a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);
   c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);
   a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);
   c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);
   a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);
   c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);
   a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);
   c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);
   a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);
   c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);
   a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);
   c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);
   a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);
   c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);
   a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);
   c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);
   a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);
   c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);
   a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);
   c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);
   a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);
   c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);
   a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);
   c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);
   x[0]=add(a,x[0]);x[1]=add(b,x[1]);x[2]=add(c,x[2]);x[3]=add(d,x[3]);
  }
  function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);}return md5blks;}
  function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)));}s=s.substring(i-64);var tail=new Array(16).fill(0);for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<((i%4)*8);tail[i>>2]|=0x80<<((i%4)*8);if(i>55){md5cycle(state,tail);tail=new Array(16).fill(0);}tail[14]=n*8;md5cycle(state,tail);return state;}
  function rstr2hex(s){var hex="";for(var i=0;i<s.length*4;i++)hex+=("0"+((s[i>>2]>>((i%4)*8+4))&0xF).toString(16)).slice(-2);
  return hex;}
  return rstr2hex(md51(unescape(encodeURIComponent(string))));
}

async function generateHashes() {
  const text = document.getElementById("hashInput").value;
  document.getElementById("md5out").innerText = "MD5: " + md5(text);
  document.getElementById("shaout").innerText = "SHA-256: " + await sha256(text);
}

let perfChart = null;

async function runPerformanceTest(){
  // Get all 5 inputs
  const inputs = [];
  for (let i = 1; i <= 5; i++) {
    const value = document.getElementById(`testInput${i}`).value;
    if (!value.trim()) {
      alert(`Please fill in all 5 input fields. Input ${i} is empty.`);
      return;
    }
    inputs.push(value);
  }
  
  // Show loading indicator
  const btn = document.getElementById('runTestBtn');
  const loadingIndicator = document.getElementById('loadingIndicator');
  const progressBar = document.getElementById('progressBar');
  
  btn.disabled = true;
  btn.innerText = 'Testing...';
  loadingIndicator.style.display = 'block';
  
  const md5Times = [];
  const sha256Times = [];
  const inputLabels = [];
  
  // Clear previous table
  let tableHTML = `
    <tr>
      <th>Input</th>
      <th>Length</th>
      <th>MD5 Time (ms)</th>
      <th>SHA-256 Time (ms)</th>
      <th>Difference</th>
    </tr>`;
  
  // Test each input multiple times for accuracy
  const iterations = 10; // Run 10 times and take average for accuracy
  const totalSteps = inputs.length;
  
  for (let i = 0; i < inputs.length; i++) {
    const input = inputs[i];
    const label = input.length > 20 ? input.substring(0, 20) + '...' : input;
    inputLabels.push(`Input ${i + 1}`);
    
    let md5TotalTime = 0;
    let sha256TotalTime = 0;
    
    // Update progress
    progressBar.style.width = ((i / totalSteps) * 100) + '%';
    
    // Warm-up run
    md5(input);
    await sha256(input);
    
    // Run multiple iterations for accurate measurement
    for (let j = 0; j < iterations; j++) {
      // Measure MD5
      const t1 = performance.now();
      md5(input);
      const t2 = performance.now();
      md5TotalTime += (t2 - t1);
      
      // Small delay between operations
      await new Promise(resolve => setTimeout(resolve, 1));
      
      // Measure SHA-256
      const t3 = performance.now();
      await sha256(input);
      const t4 = performance.now();
      sha256TotalTime += (t4 - t3);
      
      // Small delay between iterations
      await new Promise(resolve => setTimeout(resolve, 1));
    }
    
    // Calculate averages
    const md5AvgTime = (md5TotalTime / iterations).toFixed(4);
    const sha256AvgTime = (sha256TotalTime / iterations).toFixed(4);
    const percentDiff = (((sha256AvgTime - md5AvgTime) / md5AvgTime) * 100).toFixed(1);
    
    md5Times.push(parseFloat(md5AvgTime));
    sha256Times.push(parseFloat(sha256AvgTime));
    
    // Add to table
    tableHTML += `
      <tr>
        <td>${label}</td>
        <td>${input.length}</td>
        <td>${md5AvgTime}</td>
        <td>${sha256AvgTime}</td>
        <td style="color: ${percentDiff > 0 ? '#e74c3c' : '#27ae60'};">
          ${percentDiff > 0 ? '+' : ''}${percentDiff}%
        </td>
      </tr>`;
  }
  
  // Complete progress
  progressBar.style.width = '100%';
  
  // Update table
  document.getElementById("perfTable").innerHTML = tableHTML;
  document.getElementById("resultsTable").style.display = "block";
  
  // Show graph
  document.getElementById("chartContainer").classList.add("show");
  updateChart(inputLabels, md5Times, sha256Times);
  
  // Show justification report after test
  document.getElementById("justificationReport").classList.add("show");
  
  // Reset button
  setTimeout(() => {
    btn.disabled = false;
    btn.innerText = 'Run Speed Test';
    loadingIndicator.style.display = 'none';
    progressBar.style.width = '0%';
  }, 500);
}

function updateChart(labels, md5Times, sha256Times) {
  const ctx = document.getElementById('perfChart').getContext('2d');
  
  // Destroy previous chart if exists
  if (perfChart) {
    perfChart.destroy();
  }
  
  // Calculate performance difference
  const differences = md5Times.map((md5, i) => {
    return ((sha256Times[i] - md5) / md5 * 100).toFixed(1);
  });
  
  // Generate detailed explanation
  generateGraphExplanation(labels, md5Times, sha256Times, differences);
  
  perfChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'MD5 (Deprecated)',
          data: md5Times,
          backgroundColor: 'rgba(244, 67, 54, 0.15)',
          borderColor: 'rgba(244, 67, 54, 1)',
          borderWidth: 2,
          pointRadius: 5,
          pointHoverRadius: 7,
          pointBackgroundColor: 'rgba(244, 67, 54, 1)',
          pointBorderColor: '#fff',
          pointBorderWidth: 2,
          pointHoverBorderWidth: 2,
          tension: 0.4,
          fill: true
        },
        {
          label: 'SHA-256 (Recommended)',
          data: sha256Times,
          backgroundColor: 'rgba(76, 175, 80, 0.15)',
          borderColor: 'rgba(76, 175, 80, 1)',
          borderWidth: 2,
          pointRadius: 5,
          pointHoverRadius: 7,
          pointBackgroundColor: 'rgba(76, 175, 80, 1)',
          pointBorderColor: '#fff',
          pointBorderWidth: 2,
          pointHoverBorderWidth: 2,
          tension: 0.4,
          fill: true
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 2,
      layout: {
        padding: {
          left: 10,
          right: 10,
          top: 10,
          bottom: 10
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          title: {
            display: true,
            text: 'Time (milliseconds)',
            font: { size: 14, weight: 'bold' },
            color: '#2c3e50',
            padding: { top: 10, bottom: 10 }
          },
          ticks: {
            font: { size: 11 },
            color: '#555',
            padding: 8,
            callback: function(value) {
              return value.toFixed(3);
            }
          },
          grid: {
            color: 'rgba(0, 0, 0, 0.08)',
            drawBorder: true,
            borderColor: '#ddd',
            borderWidth: 1
          }
        },
        x: {
          title: {
            display: true,
            text: 'Test Inputs',
            font: { size: 14, weight: 'bold' },
            color: '#2c3e50',
            padding: { top: 10, bottom: 10 }
          },
          ticks: {
            font: { size: 11 },
            color: '#555',
            maxRotation: 0,
            minRotation: 0,
            padding: 8
          },
          grid: {
            display: true,
            color: 'rgba(0, 0, 0, 0.05)',
            drawBorder: true,
            borderColor: '#ddd',
            borderWidth: 1
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'center',
          labels: {
            font: { size: 12, weight: '600' },
            padding: 12,
            usePointStyle: true,
            pointStyle: 'circle',
            color: '#2c3e50',
            boxWidth: 8,
            boxHeight: 8
          }
        },
        title: {
          display: false
        },
        tooltip: {
          callbacks: {
            title: function(context) {
              return context[0].label;
            },
            label: function(context) {
              const label = context.dataset.label || '';
              const value = context.parsed.y.toFixed(4);
              return label + ': ' + value + ' ms';
            },
            afterLabel: function(context) {
              const index = context.dataIndex;
              const diff = differences[index];
              if (context.datasetIndex === 1) {
                return 'SHA-256 is ' + Math.abs(diff) + '% ' + (diff > 0 ? 'slower' : 'faster');
              }
              return '';
            }
          },
          backgroundColor: 'rgba(0, 0, 0, 0.85)',
          padding: 14,
          titleFont: { size: 13, weight: 'bold' },
          bodyFont: { size: 12 },
          borderColor: 'rgba(255, 255, 255, 0.3)',
          borderWidth: 1
        }
      },
      interaction: {
        mode: 'index',
        intersect: false
      },
      animation: {
        duration: 1000,
        easing: 'easeInOutQuart'
      }
    }
  });
}

function generateGraphExplanation(labels, md5Times, sha256Times, differences) {
  const explanationDiv = document.getElementById('explanationContent');
  
  let explanation = `
    <p><strong>Step 1: Data Collection</strong></p>
    <ul style="margin: 10px 0 20px 20px;">
      <li>Each input text was hashed <strong>10 times</strong> using both MD5 and SHA-256</li>
      <li>We measured the time for each hash operation using <code>performance.now()</code></li>
      <li>Total of <strong>${labels.length * 10 * 2} hash operations</strong> performed (${labels.length} inputs × 10 iterations × 2 algorithms)</li>
      <li>Average time calculated for each input to eliminate random variance</li>
    </ul>
    
    <p><strong>Step 2: Data Points Collected</strong></p>
    <table style="width: 100%; margin: 10px 0 20px 0; border-collapse: collapse; font-size: 13px;">
      <tr style="background: #34495e; color: white;">
        <th style="padding: 8px; text-align: left;">Input</th>
        <th style="padding: 8px; text-align: center;">MD5 Avg (ms)</th>
        <th style="padding: 8px; text-align: center;">SHA-256 Avg (ms)</th>
        <th style="padding: 8px; text-align: center;">Coordinates</th>
      </tr>`;
  
  for (let i = 0; i < labels.length; i++) {
    explanation += `
      <tr style="background: ${i % 2 === 0 ? '#f9f9f9' : '#fff'}; border-bottom: 1px solid #ddd;">
        <td style="padding: 8px;">${labels[i]}</td>
        <td style="padding: 8px; text-align: center; color: #e74c3c; font-weight: bold;">${md5Times[i].toFixed(4)}</td>
        <td style="padding: 8px; text-align: center; color: #27ae60; font-weight: bold;">${sha256Times[i].toFixed(4)}</td>
        <td style="padding: 8px; text-align: center; font-family: monospace; font-size: 12px;">
          <span style="color: #e74c3c;">MD5(${i+1}, ${md5Times[i].toFixed(4)})</span><br>
          <span style="color: #27ae60;">SHA(${i+1}, ${sha256Times[i].toFixed(4)})</span>
        </td>
      </tr>`;
  }
  
  explanation += `
    </table>
    
    <p><strong>Step 3: Plotting on Graph</strong></p>
    <ul style="margin: 10px 0 20px 20px;">
      <li><strong>X-axis:</strong> Input labels (Input 1, Input 2, ... Input 5)</li>
      <li><strong>Y-axis:</strong> Time in milliseconds (auto-scaled based on data range)</li>
      <li><strong>Red Line (MD5):</strong> Connects points ${md5Times.map((t, i) => `(${i+1}, ${t.toFixed(4)})`).join(' → ')}</li>
      <li><strong>Green Line (SHA-256):</strong> Connects points ${sha256Times.map((t, i) => `(${i+1}, ${t.toFixed(4)})`).join(' → ')}</li>
    </ul>
    
    <p><strong>Step 4: Mathematical Calculations</strong></p>
    <div style="background: #fff; padding: 15px; border-radius: 4px; margin: 10px 0;">`;
  
  for (let i = 0; i < labels.length; i++) {
    const diff = differences[i];
    explanation += `
      <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 3px solid ${diff > 0 ? '#e74c3c' : '#27ae60'};">
        <strong>Input ${i+1}:</strong><br>
        <code style="font-size: 12px;">
          MD5 = ${md5Times[i].toFixed(4)} ms<br>
          SHA-256 = ${sha256Times[i].toFixed(4)} ms<br>
          Difference = ${sha256Times[i].toFixed(4)} - ${md5Times[i].toFixed(4)} = ${(sha256Times[i] - md5Times[i]).toFixed(4)} ms<br>
          Percentage = ((${sha256Times[i].toFixed(4)} - ${md5Times[i].toFixed(4)}) / ${md5Times[i].toFixed(4)}) × 100 = ${diff}%
        </code>
      </div>`;
  }
  
  explanation += `
    </div>
    
    <p><strong>Step 5: Graph Rendering</strong></p>
    <ul style="margin: 10px 0 20px 20px;">
      <li>Chart.js library reads the arrays: <code>md5Times = [${md5Times.map(t => t.toFixed(4)).join(', ')}]</code></li>
      <li>And: <code>sha256Times = [${sha256Times.map(t => t.toFixed(4)).join(', ')}]</code></li>
      <li>Each value is plotted at its corresponding position on the X-axis</li>
      <li>Lines connect the points with smooth curves (tension = 0.3)</li>
      <li>The visual result shows performance trends across different inputs</li>
    </ul>
    
    <p><strong>Key Observations:</strong></p>
    <ul style="margin: 10px 0 0 20px;">
      <li>SHA-256 is consistently <strong>${differences.every(d => d > 0) ? 'slower' : 'varies'}</strong> compared to MD5</li>
      <li>Average overhead: <strong>${(differences.reduce((a, b) => a + parseFloat(b), 0) / differences.length).toFixed(1)}%</strong></li>
      <li>The pattern shows ${md5Times[0] < md5Times[md5Times.length - 1] ? 'increasing' : 'varying'} times as input complexity changes</li>
      <li>Both algorithms scale ${Math.abs(md5Times[md5Times.length - 1] - md5Times[0]) < 0.01 ? 'consistently' : 'differently'} with input variation</li>
    </ul>
  `;
  
  explanationDiv.innerHTML = explanation;
}
</script>
</body>
</html>
